<!-- templates/consultation_create.html -->
{% extends 'base_form.html'%}

{% block script %}
<script async src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
{% endblock script %}

{% block title %}
<h2>Consultation</h2>
{% endblock title %}

<!-- Formulaire Patient -->
{% block container %}
<form method="post" action="" class="your-form-class">
  {% csrf_token %}
  
  <fieldset class="form-group">
    <legend>Informations Patient </legend>
  <div class="row g-3">
    <div class="col-md-6">
      <label for="id_name" class="form-label">Nom</label>
      {{patient_form.name}}
    </div>
    <div class="col-md-6">
      <label for="id_prenom" class="form-label">Prenom</label>
      {{patient_form.prenom}}
    </div>
  </div>

  <div class="row g-3">
    <div class="col-md-4">
      <label for="id_date_naissance" class="form-label">Date de Naissance</label>
      {{patient_form.date_naissance}}
    </div>
    <div class="col-md-4">
      <label for="id_sexe" class="form-label">Sexe</label>
      {{patient_form.sexe}}
    </div>
    <div class="col-md-4">
      <label for="id_Situation_Matrimoniale" class="form-label">Situation</label>
      {{patient_form.Situation_Matrimoniale}}
    </div>
  </div>

  <div class="row g-3">
    <div class="col-md-6">
      <label for="id_addresse" class="form-label">Adresse</label>
      {{patient_form.addresse}}
    </div>
    <div class="col-md-6">
      <label for="id_email" class="form-label">Email</label>
      {{patient_form.email}}
    </div>
  </div>

  <div class="separator"></div>

  <fieldset class="form-group">
    <legend class="form-label">Motif de la consultation</legend>
    <div class="row g-3">
      <div class="col-md-6">
        <label for="id_medecin_traitant" class="form-label">Medecin Traitant</label>
        {{consultation_form.medecin_traitant}}
      </div>
      <div class="col-md-6">
        <label for="id_examen" class="form-label">Examen Demande</label>
        {{ consultation_form.examen }}
      </div>
    </div>
  </fieldset>
  
  <div class="row g-3">
    <div class="col-md-6">
      <a href="{% url 'accueil' %}">
        <button type="button" class="btn btn-outline-danger"> Annuler</button>
      </a>
    </div>
    <div class="col-md-6">
      <button type="submit" class="btn btn-primary">Enregistrer</button>
    </div>
  </div>
</form>

{% if patient_form.errors %}
<div class="errors">
  <h3>Erreurs de validation :</h3>
  <ul>
    {% for field_name, errors in patient_form.errors.items %}
    {% for error in errors %}
    <li>Champ '{{ field_name }}': {{ error }}</li>
    {% endfor %}
    {% endfor %}
  </ul>
</div>
{% endif %}

{% endblock container %}
